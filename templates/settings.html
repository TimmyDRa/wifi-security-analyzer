{% extends "base.html" %}
{% block content %}
<h3>Email Alerts Settings</h3>
<form method="post" class="row g-3">
  <div class="col-12 form-check form-switch">
    <input class="form-check-input" type="checkbox" id="enabled" name="enabled" {% if cfg.enabled %}checked{% endif %}>
    <label class="form-check-label" for="enabled">Enable Email Alerts</label>
  </div>
  <div class="col-md-6">
    <label class="form-label">SMTP Host</label>
    <input class="form-control" name="smtp_host" value="{{ cfg.smtp_host or '' }}">
  </div>
  <div class="col-md-3">
    <label class="form-label">Port</label>
    <input class="form-control" name="smtp_port" value="{{ cfg.smtp_port or 587 }}">
  </div>
  <div class="col-md-3 form-check form-switch d-flex align-items-end">
    <input class="form-check-input" type="checkbox" id="use_tls" name="use_tls" {% if cfg.use_tls %}checked{% endif %}>
    <label class="form-check-label ms-2" for="use_tls">Use STARTTLS</label>
  </div>
  <div class="col-md-6">
    <label class="form-label">Username</label>
    <input class="form-control" name="username" value="{{ cfg.username or '' }}" autocomplete="username">
  </div>
  <div class="col-md-6">
    <label class="form-label">Password</label>
    <input class="form-control" type="password" name="password" value="{{ cfg.password or '' }}" autocomplete="current-password">
  </div>
  <div class="col-md-6">
    <label class="form-label">From Address</label>
    <input class="form-control" name="from_addr" value="{{ cfg.from_addr or '' }}">
  </div>
  <div class="col-md-6">
    <label class="form-label">To Addresses (comma-separated)</label>
    <input class="form-control" name="to_addrs" value="{{ (cfg.to_addrs | join(', ')) if cfg.to_addrs else '' }}">
  </div>
  <div class="col-12">
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('test_email') }}">Send Test Email</a>
  </div>
</form>
{% endblock %}
